jjjjjjjjj# Install and configure Emacs.

# Install
{{ pillar.emacs.pkg }}:
  pkg.installed

# Download plugins
{% for plugin in pillar['emacs']['plugin_files'] %}
{{ pillar.emacs.plugins_load_path }}/{{ plugin.name }}:
  file.managed:
    - source: {{ plugin.source }}
    - makedirs: True
    - skip_verify: True
    - user: noah
    - gorup: noah
    - mode: 644
    - require:
      - file: {{ pillar.emacs.configuration_directory }}
{% endfor %}

# Configuration directory
{{ pillar.emacs.configuration_directory }}:
  file.symlink:
    - target: salt://emacs/emacs.d
    - user: noah
    - group: noah
    - mode: 644
